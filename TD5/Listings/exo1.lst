


ARM Macro Assembler    Page 1 


    1 00000000         
    2 00000000         ;; RK - Evalbot (Cortex M3 de Texas Instrument)
    3 00000000         ;; fait clignoter une seule LED connectée au port GPIOF
    4 00000000         
    5 00000000                 AREA             |.text|, CODE, READONLY
    6 00000000         
    7 00000000         ; This register controls the clock gating logic in norma
                       l Run mode
    8 00000000 400FE108 
                       SYSCTL_PERIPH_GPIOF
                               EQU              0x400FE108  ; SYSCTL_RCGC2_R (p
                                                            291 datasheet de lm
                                                            3s9b92.pdf)
    9 00000000         
   10 00000000         ; The GPIODATA register is the data register
   11 00000000 40025000 
                       GPIO_PORTF_BASE
                               EQU              0x40025000  ; GPIO Port F (APB)
                                                             base: 0x4002.5000 
                                                            (p416 datasheet de 
                                                            lm3s9B92.pdf)
   12 00000000         
   13 00000000 40024000 
                       GPIO_PORTE_BASE
                               EQU              0x40024000
   14 00000000         
   15 00000000 00000510 
                       GPIO_I_PUR
                               EQU              0x00000510
   16 00000000         
   17 00000000 00000003 
                       BROCHE0_1
                               EQU              0x03
   18 00000000         
   19 00000000         ; configure the corresponding pin to be an output
   20 00000000         ; all GPIO pins are inputs by default
   21 00000000 00000400 
                       GPIO_O_DIR
                               EQU              0x00000400  ; GPIO Direction (p
                                                            417 datasheet de lm
                                                            3s9B92.pdf)
   22 00000000         
   23 00000000         ; The GPIODR2R register is the 2-mA drive control regist
                       er
   24 00000000         ; By default, all GPIO pins have 2-mA drive.
   25 00000000 00000500 
                       GPIO_O_DR2R
                               EQU              0x00000500  ; GPIO 2-mA Drive S
                                                            elect (p428 datashe
                                                            et de lm3s9B92.pdf)
                                                            
   26 00000000         
   27 00000000         ; Digital enable register
   28 00000000         ; To use the pin as a digital input or output, the corre
                       sponding GPIODEN bit must be set.
   29 00000000 0000051C 
                       GPIO_O_DEN
                               EQU              0x0000051C  ; GPIO Digital Enab
                                                            le (p437 datasheet 



ARM Macro Assembler    Page 2 


                                                            de lm3s9B92.pdf)
   30 00000000         
   31 00000000         ; PIN select
   32 00000000 00000010 
                       PIN4    EQU              0x10        ; led1 sur broche 4
                                                            
   33 00000000         
   34 00000000         ; blinking frequency
   35 00000000 002FFFFF 
                       DUREE   EQU              0x002FFFFF  ; Random Value
   36 00000000         
   37 00000000                 ENTRY
   38 00000000                 EXPORT           __main
   39 00000000         __main
   40 00000000         
   41 00000000         
   42 00000000         ; ;; Enable the Port F peripheral clock by setting bit 5
                        (0x20 == 0b100000)  (p291 datasheet de lm3s9B96.pdf)
   43 00000000         ; ;;               (GPIO::FEDCBA)
   44 00000000 4E13            ldr              r6, = SYSCTL_PERIPH_GPIOF 
                                                            ;; RCGC2
   45 00000002 F04F 0030       mov              r0, #0x00000030 ;; Enable clock
                                                             sur GPIO F où sont
                                                             branchés les leds 
                                                            (0x20 == 0b100000)
   46 00000006         ; ;;                         (GPIO::FEDCBA)
   47 00000006 6030            str              r0, [r6]
   48 00000008         
   49 00000008         ; ;; "There must be a delay of 3 system clocks before an
                       y GPIO reg. access  (p413 datasheet de lm3s9B92.pdf)
   50 00000008 BF00            nop                          ;; tres tres import
                                                            ant....
   51 0000000A BF00            nop
   52 0000000C BF00            nop                          ;; pas necessaire e
                                                            n simu ou en debbug
                                                             step by step...
   53 0000000E         
   54 0000000E         ;^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^CONFIGURATION LED
   55 0000000E         
   56 0000000E 4E11            ldr              r6, = GPIO_PORTF_BASE+GPIO_O_DI
R 
                                                            ;; 1 Pin du portF e
                                                            n sortie (broche 4 
                                                            : 00010000)
   57 00000010 F04F 0010       ldr              r0, = PIN4
   58 00000014 6030            str              r0, [r6]
   59 00000016         
   60 00000016 4E10            ldr              r6, = GPIO_PORTF_BASE+GPIO_O_DE
N 
                                                            ;; Enable Digital F
                                                            unction 
   61 00000018 F04F 0010       ldr              r0, = PIN4
   62 0000001C 6030            str              r0, [r6]
   63 0000001E         
   64 0000001E 4E0F            ldr              r6, = GPIO_PORTF_BASE+GPIO_O_DR
2R 
                                                            ;; Choix de l'inten
                                                            sité de sortie (2mA
                                                            )



ARM Macro Assembler    Page 3 


   65 00000020 F04F 0010       ldr              r0, = PIN4
   66 00000024 6030            str              r0, [r6]
   67 00000026         
   68 00000026 F04F 0200       mov              r2, #0x000  ;; pour eteindre LE
                                                            D
   69 0000002A         
   70 0000002A         ; allumer la led broche 4 (PIN4)
   71 0000002A F04F 0310       mov              r3, #PIN4   ;; Allume portF bro
                                                            che 4 : 00010000
   72 0000002E 4E0C            ldr              r6, = GPIO_PORTF_BASE + (PIN4<<
2) 
                                                            ;; @data Register =
                                                             @base + (mask<<2) 
                                                            ==> LED1
   73 00000030         
   74 00000030         ;vvvvvvvvvvvvvvvvvvvvvvvFin configuration LED 
   75 00000030         
   76 00000030 4F0C            ldr              r7, = GPIO_PORTE_BASE+GPIO_I_PU
R 
                                                            ;; Pul_up 
   77 00000032 F04F 0003       ldr              r0, = BROCHE0_1
   78 00000036 6038            str              r0, [r7]
   79 00000038         
   80 00000038 4F0B            ldr              r7, = GPIO_PORTE_BASE+GPIO_O_DE
N 
                                                            ;; Enable Digital F
                                                            unction 
   81 0000003A F04F 0003       ldr              r0, = BROCHE0_1
   82 0000003E 6038            str              r0, [r7]
   83 00000040         
   84 00000040 4F0A            ldr              r7, = GPIO_PORTE_BASE + (BROCHE
0_1<<2) 
                                                            ;; @data Register =
                                                             @base + (mask<<2) 
                                                            ==> Switcher
   85 00000042         
   86 00000042         ;^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^CLIGNOTTEMENT
   87 00000042         
   88 00000042         ;loop
   89 00000042         ;str r2, [r6]          ;; Eteint LED car r2 = 0x00      
                       
   90 00000042         ;ldr r1, = DUREE       ;; pour la duree de la boucle d'a
                       ttente1 (wait1)
   91 00000042         
   92 00000042         ;wait1 subs r1, #1
   93 00000042         ;bne wait1
   94 00000042         
   95 00000042         ;str r3, [r6]         ;; Allume portF broche 4 : 0001000
                       0 (contenu de r3)
   96 00000042         ;ldr r1, = DUREE       ;; pour la duree de la boucle d'a
                       ttente2 (wait2)
   97 00000042         
   98 00000042         ReadState
   99 00000042         
  100 00000042 F8D7 A000       ldr              r10,[r7]
  101 00000046 F1BA 0F00       CMP              r10,#0x00
  102 0000004A D1FA            BNE              ReadState
  103 0000004C         
  104 0000004C 6033            str              r3, [r6]



ARM Macro Assembler    Page 4 


  105 0000004E         ;wait2   subs r1, #1
  106 0000004E         ;bne wait2
  107 0000004E         
  108 0000004E         ;b loop       
  109 0000004E         
  110 0000004E BF00            nop
  111 00000050                 END
              400FE108 
              40025400 
              4002551C 
              40025500 
              40025040 
              40024510 
              4002451C 
              4002400C 
Command Line: --debug --xref --diag_suppress=9931 --cpu=Cortex-M3 --apcs=interw
ork --depend=.\objects\exo1.d -o.\objects\exo1.o -I.\RTE\_Target_1 -IC:\Users\s
edob\AppData\Local\Arm\Packs\ARM\CMSIS\5.8.0\CMSIS\Core\Include -IC:\Users\sedo
b\AppData\Local\Arm\Packs\ARM\CMSIS\5.8.0\Device\ARM\ARMCM3\Include --predefine
="__EVAL SETA 1" --predefine="__MICROLIB SETA 1" --predefine="__UVISION_VERSION
 SETA 528" --predefine="_RTE_ SETA 1" --predefine="ARMCM3 SETA 1" --list=.\list
ings\exo1.lst ..\TD1\exo1.s



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

.text 00000000

Symbol: .text
   Definitions
      At line 5 in file ..\TD1\exo1.s
   Uses
      None
Comment: .text unused
ReadState 00000042

Symbol: ReadState
   Definitions
      At line 98 in file ..\TD1\exo1.s
   Uses
      At line 102 in file ..\TD1\exo1.s
Comment: ReadState used once
__main 00000000

Symbol: __main
   Definitions
      At line 39 in file ..\TD1\exo1.s
   Uses
      At line 38 in file ..\TD1\exo1.s
Comment: __main used once
3 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Absolute symbols

BROCHE0_1 00000003

Symbol: BROCHE0_1
   Definitions
      At line 17 in file ..\TD1\exo1.s
   Uses
      At line 77 in file ..\TD1\exo1.s
      At line 81 in file ..\TD1\exo1.s
      At line 84 in file ..\TD1\exo1.s

DUREE 002FFFFF

Symbol: DUREE
   Definitions
      At line 35 in file ..\TD1\exo1.s
   Uses
      None
Comment: DUREE unused
GPIO_I_PUR 00000510

Symbol: GPIO_I_PUR
   Definitions
      At line 15 in file ..\TD1\exo1.s
   Uses
      At line 76 in file ..\TD1\exo1.s
Comment: GPIO_I_PUR used once
GPIO_O_DEN 0000051C

Symbol: GPIO_O_DEN
   Definitions
      At line 29 in file ..\TD1\exo1.s
   Uses
      At line 60 in file ..\TD1\exo1.s
      At line 80 in file ..\TD1\exo1.s

GPIO_O_DIR 00000400

Symbol: GPIO_O_DIR
   Definitions
      At line 21 in file ..\TD1\exo1.s
   Uses
      At line 56 in file ..\TD1\exo1.s
Comment: GPIO_O_DIR used once
GPIO_O_DR2R 00000500

Symbol: GPIO_O_DR2R
   Definitions
      At line 25 in file ..\TD1\exo1.s
   Uses
      At line 64 in file ..\TD1\exo1.s
Comment: GPIO_O_DR2R used once
GPIO_PORTE_BASE 40024000

Symbol: GPIO_PORTE_BASE
   Definitions
      At line 13 in file ..\TD1\exo1.s
   Uses
      At line 76 in file ..\TD1\exo1.s
      At line 80 in file ..\TD1\exo1.s



ARM Macro Assembler    Page 2 Alphabetic symbol ordering
Absolute symbols

      At line 84 in file ..\TD1\exo1.s

GPIO_PORTF_BASE 40025000

Symbol: GPIO_PORTF_BASE
   Definitions
      At line 11 in file ..\TD1\exo1.s
   Uses
      At line 56 in file ..\TD1\exo1.s
      At line 60 in file ..\TD1\exo1.s
      At line 64 in file ..\TD1\exo1.s
      At line 72 in file ..\TD1\exo1.s

PIN4 00000010

Symbol: PIN4
   Definitions
      At line 32 in file ..\TD1\exo1.s
   Uses
      At line 57 in file ..\TD1\exo1.s
      At line 61 in file ..\TD1\exo1.s
      At line 65 in file ..\TD1\exo1.s
      At line 71 in file ..\TD1\exo1.s
      At line 72 in file ..\TD1\exo1.s

SYSCTL_PERIPH_GPIOF 400FE108

Symbol: SYSCTL_PERIPH_GPIOF
   Definitions
      At line 8 in file ..\TD1\exo1.s
   Uses
      At line 44 in file ..\TD1\exo1.s
Comment: SYSCTL_PERIPH_GPIOF used once
10 symbols
350 symbols in table
